# 第 7 章　数组

数组是值的有序集合。每个值叫做一个元素，而每个元素在数组中有一个位置，以数字表示，称为索引。

JavaScript 数组的索引是基于零的 32 位数值：第一个元素的索引为 0，最大可能的索引为 4294967294(2^32-2)，数组最大能容纳 4 294 967 295 个元素。

JavaScript 数组是 JavaScript 对象的特殊形式，数组索引实际上和碰巧是整数的属性名差不多。

## 7.1 创建数组

## 7.2 数组元素的读和写

使用[​]操作符来访问数组中的一个元素。数组的引用位于方括号的左边。方括号中是一个返回非负整数值的任意表达式。使用该语法既可以读又可以写数组的一个元素。

## 7.3 稀疏数组

稀疏数组就是包含从 0 开始的不连续索引的数组。通常，数组的 length 属性值代表数组中元素的个数。如果数组是稀疏的，length 属性值大于元素的个数。

## 7.4 数组长度

## 7.5 数组元素的添加和删除

## 7.6 数组遍历

## 7.7 多维数组

JavaScript 不支持真正的多维数组，但可以用数组的数组来近似。访问数组的数组中的元素，只要简单地使用两次[​]操作符即可。

## 7.8 数组方法

### 7.8.1 join()

Array.join()方法将数组中所有元素都转化为字符串并连接在一起，返回最后生成的字符串。

```js
var a = [1, 2, 3]; //创建一个包含三个元素的数组
a.join(); //=＞"1,2,3"
a.join(""); //=＞"1 2 3"
a.join(""); //=＞"123"
var b = new Array(10); //长度为10的空数组
b.join("-"); //=＞'---------':9个连字号组成的字符串
```

### 7.8.2 reverse()

Array.reverse()方法将数组中的元素颠倒顺序，返回逆序的数组。

```js
var a = [1, 2, 3];
a.reverse().join(); //=＞"3,2,1",并且现在的a是[3,2,1]
```

### 7.8.3 sort()

Array.sort()方法将数组中的元素排序并返回排序后的数组。当不带参数调用 sort()时，数组元素以字母表顺序排序（如有必要将临时转化为字符串进行比较）​

### 7.8.4 concat()

Array.concat()方法创建并返回一个新数组，它的元素包括调用 concat()的原始数组的元素和 concat()的每个参数。

如果这些参数中的任何一个自身是数组，则`连接的是数组的元素，而非数组本身`。但要注意，concat()不会递归扁平化数组的数组。concat()也不会修改调用的数组。

```js
var a = [1, 2, 3];
a.concat(4, 5); //返回[1,2,3,4,5]
a.concat([4, 5]); //返回[1,2,3,4,5]
a.concat([4, 5], [6, 7]); //返回[1,2,3,4,5,6,7]
a.concat(4, [5, [6, 7]]); //返回[1,2,3,4,5,[6,7]]
```

### 7.8.5 slice()

Array.slice()方法返回指定数组的一个片段或子数组。它的两个参数分别指定了片段的开始和结束的位置。

### 7.8.6 splice()

Array.splice()方法是在`数组中插入或删除元素的通用方法`。不同于 slice()和 concat()，splice()会修改调用的数组。注意，splice()和 slice()拥有非常相似的名字，但它们的功能却有本质的区别。

```js
var a = [1, 2, 3, 4, 5, 6, 7, 8];
a.splice(4); //返回[5,6,7,8];a是[1,2,3,4]
a.splice(1, 2); //返回[2,3];a是[1,4]
a.splice(1, 1); //返回[4];a是[1]
```

splice()的前两个参数指定了需要删除的数组元素。紧随其后的任意个数的参数指定了需要插入到数组中的元素，从第一个参数指定的位置开始插入。

```js
var a = [1, 2, 3, 4, 5];
a.splice(2, 0, "a", "b"); //返回[];a是[1,2,'a','b',3,4,5]
a.splice(2, 2, [1, 2], 3); //返回['a','b'];a是[1,2,[1,2],3,3,4,5]
```

注意，区别于 concat()，splice()会`插入数组本身而非数组的元素`。

### 7.8.7 push()和 pop()

push()和 pop()方法允许将数组当做`栈`来使用。push()方法在数组的尾部添加一个或多个元素，并返回数组新的长度。pop()方法则相反：它删除数组的最后一个元素，减小数组长度并返回它删除的值。

### 7.8.8 unshift()和 shift()

unshift()和 shift()方法的行为非常类似于 push()和 pop()，不一样的是前者是在数组的头部而非尾部进行元素的插入和删除操作。

### 7.8.9 toString()和 toLocaleString()

数组和其他 JavaScript 对象一样拥有 toString()方法。针对数组，该方法将其每个元素转化为字符串（如有必要将调用元素的 toString()方法）并且输出用逗号分隔的字符串列表。

```js
[1, 2, 3]
  .toString() //生成'1,2,3'
  [("a", "b", "c")].toString() //生成'a,b,c'
  [(1, [2, "c"])].toString(); //生成'1,2,c'
```

## 7.9 ECMAScript 5 中的数组方法

ECMAScript 5 定义了 9 个新的数组方法来遍历、映射、过滤、检测、简化和搜索数组。

### 7.9.1 forEach()

forEach()方法从头至尾遍历数组，为每个元素调用指定的函数。

然后 forEach()使用三个参数调用该函数：`数组元素、元素的索引和数组本身`。

### 7.9.2 map()

### 7.9.3 filter()

### 7.9.4 every()和 some()

### 7.9.5 reduce()和 reduceRight()

### 7.9.6 indexOf()和 lastIndexOf()

## 7.10 数组类型

## 7.11 类数组对象

## 7.12 作为数组的字符串
